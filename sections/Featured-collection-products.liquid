 
 <style>
 *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    .Featured_collection_products_d1{
        width: 100%;
        background-color: {{ section.settings.background_color | default: '#ffffff' }};
        padding-block: {{ section.settings.section_padding_top | default: 30 }}px {{ section.settings.section_padding_bottom | default: 30 }}px;
    }
    .Featured_collection_products_inner{
        width:100%;
        height:auto;
        display:flex;
        flex-direction:column;
        gap:4px;
        margin:0 auto
    }
    .Featured_collection_header{
        width:100%;
        display:flex;
        flex-direction:column;
        gap:4px;
        margin-bottom: 50px;
        justify-content: center;
        align-items: center;
    }
    .Featured_collection_header h2{
        width:100%;
        text-align:center;
        font-size:{{ section.settings.heading_size | default: 36 }}px;
        font-family:jost,sans-serif;
        color: {{ section.settings.heading_color | default: '#000000' }};
    }
    .Featured_collection_header p{
        width:fit-content;
        font-size:12px;
        text-align:center;
        font-family:jost,sans-serif;
        color: {{ section.settings.subheading_color | default: '#969696' }};
        text-transform:uppercase;
        position:relative;
    }
    .Featured_collection_header p::after{
        content:'';
        background-color: {{ section.settings.accent_color | default: '#728669' }};
        position: absolute;
        bottom: -20px;
        width: 60px;
        height: 2px;
        left:50%;
        transform: translateX(-50%);
    }
    .Featured_products_container_d1{
        width: 100%;
        height: auto;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat({{ section.settings.products_per_row_desktop | default: 4 }}, 1fr);
        gap: 10px;
     
    }
    .Featured_product_card{
        width:100%;
        height:100%;
        display:flex;
        flex-direction:column;
        gap:auto
    }
    .Featured_product_card_header{
        width:100%;
        height:auto;
        position: relative;
    }
    .Featured_product_image{
        width: 100%;
        height: auto;
        position: relative;
        overflow: hidden;
    }
    .product-image-banner{
        font-size: 12px;
        font-weight: 500;
        letter-spacing: .1rem;
        line-height: 1.21;
        color: #fff;
        height: auto;
        display: flex;
        z-index: 1;
        pointer-events: none;
        width: 110px;
        height: 28px;
        justify-content: center;
        align-items: center;
        background-color: {{ section.settings.sale_badge_color | default: '#e12c43' }};
        position:absolute;
        top: 13px;
        right: -26px;
        transform: rotate(45deg);
        {% unless section.settings.show_sale_badge %}
        display: none;
        {% endunless %}
    }
    .Featured_product_image a{
        width: 100%;
        display: block;
        text-decoration: none;
        position: relative;
        z-index: 1;
    }
    .Featured_product_image a img{
        width: 100%;
        height: {{ section.settings.product_image_height | default: 330 }}px;
        object-fit: cover;
        transition: opacity 0.3s ease;
    }
    
    /* Second image hover effect */
    .product-image-secondary {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: {{ section.settings.product_image_height | default: 330 }}px;
        object-fit: cover;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    {% if section.settings.enable_hover_effects %}
    .Featured_product_card:hover .product-image-secondary {
        opacity: 1;
    }
    {% endif %}
    
    .product-icons-overlay{
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 12px;
        justify-content: center;
        align-items: center;
        position: absolute;
        bottom: 10%;
        pointer-events: none;
    }
    .custom-icons-container{
        width: 100%;
        height: 100%;
        transition: 0.3s;
        transform: translateY(20px);
        display: flex;
        gap: 10px;
        justify-content: center;
        align-items: center;
        opacity: 0;
        pointer-events: auto;
    }
    {% if section.settings.enable_hover_effects %}
    .Featured_product_card:hover .custom-icons-container{
        transform: translateX(0px);
        opacity: 1;
    }
    {% else %}
    .custom-icons-container{
        opacity: 1;
        transform: translateY(0px);
    }
    {% endif %}

    .custom-icon-box{
        width: auto;
        height: auto;
        position: relative;
    }
    .custom-swatches-container{
        width: 100%;
        display: flex;
        gap: 10px;
        justify-content: center;
        align-items: center;
        padding: 10px 0px;
        transition: 1s;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.3s ease, transform 0.3s ease;
        height: 20px;
        {% unless section.settings.show_color_swatches %}
        display: none;
        {% endunless %}
    }
    {% if section.settings.enable_hover_effects %}
    .Featured_product_card:hover .custom-swatches-container{
        opacity: 1;
        transform: translateY(0px);
        transition: opacity 1s ease 0.3s, transform 1s ease 0.3s;
    }
    {% else %}
    .custom-swatches-container{
        opacity: 1;
        transform: translateY(0px);
    }
    {% endif %}
    .color-swatch{
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: red;
        transition: 0.3s;
        cursor: pointer;
        border: 2px solid transparent;
    }
    .color-swatch:hover,
    .color-swatch.active{
        width: 14px;
        height: 14px;
        border-color: #333;
    }
    .icon-button{
        color: none;
        border:none;
        border-radius: 50%;
        background: white;
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        position: relative;
        transition:0.5s
    }
    .icon-button:hover{
        background:black;
    }
    .icon-button:hover svg{
        color:white;
    }
    .button-banner{
        position: absolute;
        top: -50px;
        left: 50%;
        transform: translateX(-50%);
        opacity: 0;
        transition: 0.4s;
        width: auto;
        pointer-events: none;
        white-space: nowrap;
    }
    .custom-icon-box:hover .button-banner{
        opacity: 1;
        top: -40px;
    }
    .button-banner-inner{
        width: auto;
        height: auto;
        position: relative;
    }
    .button-banner-inner span{
        display: inline-block;
        width: auto;
        color: white;
        background-color: black;
        padding: 2px 3px;   
        border-radius: 4px;
        position: relative;
        width: 100%;
        display: flex;
        text-align: center;
        justify-content: center;
    }
    .button-banner-inner span::after{
        content: '';
        width: 8px;
        height: 8px;
        background-color: black;
        position: absolute;
        bottom:-4px;
        left: 50%;
        transform: translateX(-50%) rotate(45deg);
    }
    .product_description_d1{
        width:100%;
        display:flex;
        justify:center;
        flex-direction:column;
        gap:5px;
        margin-top: 20px;
    }
    .product_description_d1 h2{
        width:100%;
        font-size:16px;
        text-align:center;
        font-family:jost,sans-serif;
        color:black
    }
    .Product_price_container{
        width:100%;
        display:flex;
        justify-content:center;
        align-items:center;
        gap:10px;
        justify-content: center;
    }
    .Product_price_container span:nth-child(1) {
        color: {{ section.settings.price_color | default: '#76826D' }};
        font-size:15px;
        font-family:jost,sans-serif;
    }
    .Product_price_container span:nth-child(2){
        color:rgb(0 0 0 / 50%);
        font-size:15px;
        font-family:jost,sans-serif;
        text-decoration: line-through;
        {% unless section.settings.show_compare_price %}
        display: none;
        {% endunless %}
    }
    
    /* Loading state for add to cart */
    .icon-button.loading {
        pointer-events: none;
    }
    
    .icon-button.loading svg {
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    @media (max-width:1200px) {
        .Featured_products_container_d1{
            grid-template-columns: repeat({{ section.settings.products_per_row_tablet | default: 3 }}, 1fr);
        }
    }
    @media (max-width:900px) {
        .Featured_products_container_d1{
            grid-template-columns: repeat(2, 1fr);
        }
    }
    @media (max-width:650px) {
        .Featured_products_container_d1{
            grid-template-columns: repeat({{ section.settings.products_per_row_mobile | default: 1 }}, 1fr);
        }
    }
</style>

<section class="Featured_collection_products_d1">
    <div class="Featured_collection_products_inner xo-container-width">
        <div class="Featured_collection_header"> 
            <h2>Signature Product</h2>
            <p>NEW COLLECTIONS</p>
        </div>
       
        <div class="Featured_products_container_d1">
            {% assign collection = collections[section.settings.Add-collection] %}
            {% for product in collection.products %}
            <div class="Featured_product_card" data-aos="fade-up"
     data-aos-anchor-placement="top-center">
                <div class="Featured_product_card_header">
                    <div class="Featured_product_image">
                        <a href="{{ product.url }}">
                            <img class="product-image-primary" src="{{ product.featured_image | img_url:'master' }}" alt="{{ product.title }}">
                            {% if product.images.size > 1 %}
                                <img class="product-image-secondary" src="{{ product.images[1] | img_url:'master' }}" alt="{{ product.title }}">
                            {% endif %}
                        </a>
                        <div class="product-image-banner"> Sale </div>
                    </div><!--image-->
                    
                    <div class="product-icons-overlay">
                        <div class="custom-icons-container">
                            <div class="custom-icon-box">
                                {% if product.variants.size > 1 %}
                                <button class="icon-button" onclick="location.href='{{ product.url }}'">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="20" version="1.1">
                                        <g transform="matrix(1.3333333,0,0,-1.3333333,0,400)" id="g10">
                                            <g transform="scale(0.1)" id="g12">
                                                <path id="path14" style="fill-opacity:1;fill-rule:nonzero;stroke:none;" d="m 784.238,1668.15 c 92.879,-92.87 92.879,-243.43 0,-336.3 -92.883,-92.89 -243.437,-92.89 -336.316,0 -92.883,92.87 -92.883,243.43 0,336.3 92.879,92.89 243.433,92.89 336.316,0" fill="currentColor"></path>
                                                <path id="path16" style="fill-opacity:1;fill-rule:nonzero;stroke:none;" d="m 2572.08,1668.15 c 92.88,-92.87 92.88,-243.43 0,-336.3 -92.87,-92.89 -243.44,-92.89 -336.31,0 -92.88,92.87 -92.88,243.43 0,336.3 92.87,92.89 243.44,92.89 336.31,0" fill="currentColor"></path>
                                                <path id="path18" style="fill-opacity:1;fill-rule:nonzero;stroke:none;" d="m 1678.15,1668.15 c 92.89,-92.87 92.89,-243.43 0,-336.3 -92.87,-92.89 -243.43,-92.89 -336.3,0 -92.89,92.87 -92.89,243.43 0,336.3 92.87,92.89 243.43,92.89 336.3,0" fill="currentColor"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </button>
                                <div class="button-banner">
                                    <div class="button-banner-inner">
                                        <span>More Options</span>
                                    </div>
                                </div>
                                {% endif %}
                            </div><!--icon box-->
                            
                            <div class="custom-icon-box">
                                {% render 'custom-buy-button', 
                                product: product, 
                                show_payment_button: false,
                                atc_button_background: section.settings.icon_button_bg_color,
                                atc_button_text_color: '#ffffff',
                                form_id: 'product-form-' | append: product.id %}
                                
                                <div class="button-banner">
                                    <div class="button-banner-inner">
                                        <span>Add to cart</span>
                                    </div>
                                </div>
                            </div><!--icon box-->
                            
                            <div class="custom-icon-box">
                                {% comment %} <button class="icon-button" onclick="openQuickView('{{ product.id }}')">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="20" id="svg2" version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xml:space="preserve">
                                        <g transform="matrix(1.3333333,0,0,-1.3333333,0,400)" id="g10">
                                            <g transform="scale(0.1)" id="g12">
                                                <path id="path14" style="fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 1312.7,795.5 c -472.7,0 -857.204,384.3 -857.204,856.7 0,472.7 384.504,857.2 857.204,857.2 472.7,0 857.3,-384.5 857.3,-857.2 0,-472.4 -384.6,-856.7 -857.3,-856.7 z M 2783.9,352.699 2172.7,963.898 c 155.8,194.702 241.5,438.602 241.5,688.302 0,607.3 -494.1,1101.4 -1101.5,1101.4 -607.302,0 -1101.399,-494.1 -1101.399,-1101.4 0,-607.4 494.097,-1101.501 1101.399,-1101.501 249.8,0 493.5,85.5 687.7,241 L 2611.7,181 c 23,-23 53.6,-35.699 86.1,-35.699 32.4,0 63,12.699 86,35.699 23.1,22.801 35.8,53.301 35.8,85.898 0,32.602 -12.7,63 -35.7,85.801" fill="currentColor"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </button> {% endcomment %}
                                 {%- capture quick_buy_id -%}product-quick-buy-{{ section.id }}-{{ product.id }}{%- endcapture -%}

                                  <button type="button" aria-controls="{{ quick_buy_id }}" class="product-card__quick-add-button icon-button">
                                    <span class="sr-only">{{ 'product.general.choose_options' | t }}</span>
                                   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="20" id="svg2" version="1.1" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xml:space="preserve">
                                        <g transform="matrix(1.3333333,0,0,-1.3333333,0,400)" id="g10">
                                            <g transform="scale(0.1)" id="g12">
                                                <path id="path14" style="fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 1312.7,795.5 c -472.7,0 -857.204,384.3 -857.204,856.7 0,472.7 384.504,857.2 857.204,857.2 472.7,0 857.3,-384.5 857.3,-857.2 0,-472.4 -384.6,-856.7 -857.3,-856.7 z M 2783.9,352.699 2172.7,963.898 c 155.8,194.702 241.5,438.602 241.5,688.302 0,607.3 -494.1,1101.4 -1101.5,1101.4 -607.302,0 -1101.399,-494.1 -1101.399,-1101.4 0,-607.4 494.097,-1101.501 1101.399,-1101.501 249.8,0 493.5,85.5 687.7,241 L 2611.7,181 c 23,-23 53.6,-35.699 86.1,-35.699 32.4,0 63,12.699 86,35.699 23.1,22.801 35.8,53.301 35.8,85.898 0,32.602 -12.7,63 -35.7,85.801" fill="currentColor"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </button>

                                <quick-buy-modal handle="{{ product.handle }}?variant={{ product.selected_or_first_available_variant.id }}" class="quick-buy-modal modal" id="{{ quick_buy_id }}">
                                </quick-buy-modal>
                                <div class="button-banner">
                                    <div class="button-banner-inner">
                                        <span>QuickView</span>
                                    </div>
                                </div>
                            </div><!--icon box-->
                            
                            <div class="custom-icon-box">
                                <button class="icon-button" onclick="addToWishlist('{{ product.id }}')">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="20" version="1.1">
                                        <g transform="matrix(1.3333333,0,0,-1.3333333,0,400)" id="g10">
                                            <g transform="scale(0.1)" id="g12">
                                                <path id="path14" style="fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 903,2424.4 c 157.9,0 306.4,-61.5 418.1,-173.1 l 134.8,-134.9 c 20.7,-20.6 48.1,-32 77.1,-32 29,0 56.4,11.4 77,32 l 133.7,133.7 c 111.7,111.6 259.9,173.1 417.5,173.1 156.91,0 305,-61.3 416.8,-172.5 111.2,-111.3 172.5,-259.5 172.5,-417.5 0.6,-157.3 -60.69,-305.5 -172.5,-417.4 L 1531.5,373.5 487.402,1417.6 c -111.601,111.7 -173.105,259.9 -173.105,417.5 0,158.1 61.199,306.1 172.5,416.8 111.308,111.2 259.101,172.5 416.203,172.5 z m 1829.7,-19.6 c 0,0 0,0 -0.1,0 -152.4,152.4 -355.1,236.3 -570.9,236.3 -215.7,0 -418.7,-84.1 -571.5,-236.9 l -56.9,-57 -58.2,58.2 c -153.1,153.1 -356.3,237.5 -572.1,237.5 -215.305,0 -417.902,-83.9 -570.305,-236.3 -153,-153 -236.8942,-356 -236.2966,-571.5 0,-215 84.4026,-417.8 237.4966,-571 L 1454.7,143.301 c 20.5,-20.403 48.41,-32.199 76.8,-32.199 28.7,0 56.7,11.5 76.7,31.597 L 2731.5,1261.8 c 152.7,152.7 236.8,355.7 236.8,571.4 0.7,216 -83,419 -235.6,571.6" fill="currentColor"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </button>
                                <div class="button-banner">
                                    <div class="button-banner-inner">
                                        <span>Add to Wishlist</span>
                                    </div>
                                </div>
                            </div><!--icon box-->
                        </div><!--icons-container-->

                        <div class="custom-swatches-container">
                            {% assign color_option_index = 0 %}
                            {% for option in product.options_with_values %}
                                {% if option.name == 'Color' or option.name == 'colour' %}
                                    {% assign color_option_index = forloop.index0 %}
                                {% endif %}
                            {% endfor %}

                            {% assign processed_colors = '' %}
                            {% for variant in product.variants %}
                                {% assign color = variant.options[color_option_index] %}
                                {% unless processed_colors contains color %}
                                    {% if variant.image %}
                                        <div 
                                            class="color-swatch" 
                                            style="background-color: {{ color | downcase }};" 
                                            data-variant-id="{{ variant.id }}"
                                            data-variant-image="{{ variant.image.src | img_url: 'master' }}"
                                            data-product-id="{{ product.id }}"
                                            onclick="changeProductImage(this)" >
                                        </div>
                                        {% assign processed_colors = processed_colors | append: color | append: ',' %}
                                    {% endif %}
                                {% endunless %}
                            {% endfor %}
                        </div>
                    </div><!--overlay-->
                </div><!--card header-->
                
                <div class="product_description_d1">
                    <h2>{{ product.title }}</h2>   
                    <div class="Product_price_container">
                        <span>{{ product.price | money }}</span>
                        {% if product.compare_at_price > product.price %}
                            <span>{{ product.compare_at_price | money }}</span>
                        {% endif %}    
                    </div>  
                </div>
            </div><!--card-->
            {% endfor %}
        </div>
    </div>
</section>

<script>
function changeProductImage(swatch) {
    const variantImage = swatch.getAttribute('data-variant-image');
    const productCard = swatch.closest('.Featured_product_card');
    const primaryImage = productCard.querySelector('.product-image-primary');
    const secondaryImage = productCard.querySelector('.product-image-secondary');

    if (variantImage && primaryImage) {
        primaryImage.src = variantImage;

        // Optional: temporarily hide the secondary image
        if (secondaryImage) {
            secondaryImage.style.display = 'none';
        }

        // Optionally re-enable it after some time or interaction
    }
}
</script>

{% schema %}
{
    "name": "Featured Products",
    "settings": [
        {
            "type": "collection",
            "id": "Add-collection",
            "label": "Select Collection"
        },
        {
            "type": "text",
            "id": "section_heading",
            "label": "Section Heading",
            "default": "Signature Product"
        },
        {
            "type": "text",
            "id": "section_subheading",
            "label": "Section Subheading",
            "default": "NEW COLLECTIONS"
        },
        {
            "type": "range",
            "id": "products_per_row_desktop",
            "label": "Products per row (Desktop)",
            "min": 2,
            "max": 5,
            "step": 1,
            "default": 4
        },
        {
            "type": "range",
            "id": "products_per_row_tablet",
            "label": "Products per row (Tablet)",
            "min": 1,
            "max": 4,
            "step": 1,
            "default": 3
        },
        {
            "type": "range",
            "id": "products_per_row_mobile",
            "label": "Products per row (Mobile)",
            "min": 1,
            "max": 3,
            "step": 1,
            "default": 1
        },
        {
            "type": "color",
            "id": "background_color",
            "label": "Background Color",
            "default": "#ffffff"
        },
        {
            "type": "color",
            "id": "heading_color",
            "label": "Heading Color",
            "default": "#000000"
        },
        {
            "type": "color",
            "id": "subheading_color",
            "label": "Subheading Color",
            "default": "#969696"
        },
        {
            "type": "color",
            "id": "accent_color",
            "label": "Accent Color (Underline)",
            "default": "#728669"
        },
        {
            "type": "color",
            "id": "sale_badge_color",
            "label": "Sale Badge Color",
            "default": "#e12c43"
        },
        {
            "type": "color",
            "id": "price_color",
            "label": "Price Color",
            "default": "#76826D"
        },
        {
            "type": "range",
            "id": "section_padding_top",
            "label": "Section Padding Top (px)",
            "min": 0,
            "max": 100,
            "step": 5,
            "default": 30
        },
        {
            "type": "range",
            "id": "section_padding_bottom",
            "label": "Section Padding Bottom (px)",
            "min": 0,
            "max": 100,
            "step": 5,
            "default": 30
        },
        {
            "type": "range",
            "id": "heading_size",
            "label": "Heading Font Size (px)",
            "min": 24,
            "max": 60,
            "step": 2,
            "default": 36
        },
        {
            "type": "range",
            "id": "product_image_height",
            "label": "Product Image Height (px)",
            "min": 200,
            "max": 500,
            "step": 10,
            "default": 330
        },
        {
            "type": "checkbox",
            "id": "show_sale_badge",
            "label": "Show Sale Badge",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "show_color_swatches",
            "label": "Show Color Swatches",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "show_compare_price",
            "label": "Show Compare Price",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "enable_hover_effects",
            "label": "Enable Hover Effects",
            "default": true
        }
    ],
    "presets": [
        {
            "name": "Featured Products"
        }
    ]
}
{% endschema %}